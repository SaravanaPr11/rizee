import { useContext, useEffect, useId, useMemo } from "react";
import { ZIndexHardcodedContext, ZIndexStackContext } from "./context.native.js";
var ZIndicesByContext = {},
  useStackedZIndex = function (props) {
    var _ZIndicesByContext,
      _stackLayer,
      {
        stackZIndex,
        zIndex: zIndexProp
      } = props,
      id = useId(),
      stackingContextLevel = useContext(ZIndexStackContext),
      stackLayer = stackZIndex === "global" ? 0 : stackingContextLevel,
      hardcoded = useContext(ZIndexHardcodedContext);
    (_ZIndicesByContext = ZIndicesByContext)[_stackLayer = stackLayer] || (_ZIndicesByContext[_stackLayer] = {});
    var stackContext = ZIndicesByContext[stackLayer],
      zIndex = useMemo(function () {
        if (typeof zIndexProp == "number") return zIndexProp;
        if (stackZIndex) {
          if (hardcoded) return hardcoded + 1;
          var highest = Object.values(stackContext).reduce(function (acc, cur) {
              return Math.max(acc, cur);
            }, 0),
            found = stackLayer * 5e3 + highest + 1;
          return typeof stackZIndex == "number" ? stackZIndex + found : found;
        }
        return 1;
      }, [stackLayer, zIndexProp, stackZIndex]);
    return useEffect(function () {
      if (stackZIndex) return stackContext[id] = zIndex, function () {
        delete stackContext[id];
      };
    }, [zIndex]), zIndex;
  };
export { useStackedZIndex };
//# sourceMappingURL=useStackedZIndex.native.js.map
